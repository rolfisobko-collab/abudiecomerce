(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1e3],{380:(e,s,a)=>{Promise.resolve().then(a.bind(a,7633))},7633:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>u});var r=a(5155),t=a(2115);a(6962);var l=a(1189),i=a(2885),o=a(3805),n=a(5037);let c=e=>{let{productId:s,onRatingSubmit:a}=e,{user:l,updateProductRating:c}=(0,o.U)(),[d,m]=(0,t.useState)(0),[x,h]=(0,t.useState)(""),[g,f]=(0,t.useState)(!1),u=async e=>{if(e.preventDefault(),!l){n.Ay.error("Debes iniciar sesi\xf3n para calificar productos");return}if(0===d){n.Ay.error("Por favor selecciona una calificaci\xf3n");return}f(!0);try{let e=await fetch("/api/product/rating",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({productId:s,rating:d,review:x.trim()})}),r=await e.json();r.success?(n.Ay.success(r.message),m(0),h(""),void 0!==r.averageRating&&void 0!==r.totalRatings&&c(s,r.averageRating,r.totalRatings),a&&a(r.rating)):n.Ay.error(r.message)}catch(e){console.error("Error submitting rating:",e),n.Ay.error("Error al enviar calificaci\xf3n")}finally{f(!1)}};return l?(0,r.jsxs)("form",{onSubmit:u,className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tu calificaci\xf3n"}),(0,r.jsx)(i.A,{rating:d,interactive:!0,onRatingChange:m,size:"lg",showCount:!1})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"review",className:"block text-sm font-medium text-gray-700 mb-2",children:"Rese\xf1a (opcional)"}),(0,r.jsx)("textarea",{id:"review",value:x,onChange:e=>h(e.target.value),placeholder:"Comparte tu experiencia con este producto...",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-yellow-400 focus:border-transparent resize-none",rows:3,maxLength:500}),(0,r.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:[x.length,"/500 caracteres"]})]}),(0,r.jsx)("button",{type:"submit",disabled:g||0===d,className:"w-full bg-black text-white py-2 px-4 rounded-lg hover:bg-gray-800 transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed",children:g?"Enviando...":"Enviar calificaci\xf3n"})]}):(0,r.jsx)("div",{className:"bg-gray-50 p-4 rounded-lg",children:(0,r.jsx)("p",{className:"text-gray-600 text-sm",children:"Inicia sesi\xf3n para calificar este producto"})})};var d=a(3996),m=a(846),x=a(8378),h=a(5565),g=a(6046),f=a(1598);let u=()=>{let{id:e}=(0,g.useParams)(),{products:s,router:a,addToCart:n,user:u,getCategoryName:p}=(0,o.U)(),[b,j]=(0,t.useState)(null),[y,v]=(0,t.useState)(null),[N,w]=(0,t.useState)([]),[k,C]=(0,t.useState)(!1),A=async()=>{let a=s.find(s=>s._id===e);a&&(v({...a,minQuantity:a.minQuantity&&a.minQuantity>0?a.minQuantity:1}),M(a._id))},M=async e=>{try{let s=await fetch("/api/product/rating?productId=".concat(e)),a=await s.json();a.success&&w(a.ratings)}catch(e){console.error("Error fetching ratings:",e)}};return(0,t.useEffect)(()=>{A()},[e,s.length]),y?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(d.A,{}),(0,r.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 via-white to-gray-100",children:[(0,r.jsxs)("div",{className:"px-6 md:px-16 lg:px-32 pt-8 pb-16",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-600 mb-8",children:[(0,r.jsx)("a",{href:"/",className:"hover:text-[#feecaf] transition-colors",children:"Inicio"}),(0,r.jsx)("span",{children:"/"}),(0,r.jsx)("a",{href:"/all-products",className:"hover:text-[#feecaf] transition-colors",children:"Productos"}),(0,r.jsx)("span",{children:"/"}),(0,r.jsx)("span",{className:"text-gray-900 font-medium",children:y.name})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-12 lg:gap-16",children:[(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"relative group",children:[(0,r.jsx)("div",{className:"bg-white/80 backdrop-blur-sm rounded-3xl shadow-2xl border border-gray-200/50 overflow-hidden",children:b||y.image&&y.image[0]?(0,r.jsx)(h.default,{src:b||y.image[0],alt:y.name,className:"w-full h-96 lg:h-[500px] object-cover group-hover:scale-105 transition-transform duration-500",width:1280,height:720}):(0,r.jsx)(h.default,{src:"/placeholder-product.jpeg",alt:y.name,className:"w-full h-96 lg:h-[500px] object-cover group-hover:scale-105 transition-transform duration-500",width:1280,height:720})}),y.price>y.offerPrice&&(0,r.jsxs)("div",{className:"absolute top-4 left-4 bg-gradient-to-r from-red-500 to-pink-500 text-white text-sm font-bold px-3 py-1.5 rounded-full shadow-lg",children:["-",Math.round((y.price-y.offerPrice)/y.price*100),"% OFF"]})]}),(0,r.jsx)("div",{className:"grid grid-cols-4 gap-4",children:y.image&&y.image.length>0?y.image.map((e,s)=>e?(0,r.jsx)("div",{onClick:()=>j(e),className:"cursor-pointer rounded-xl overflow-hidden bg-white/80 backdrop-blur-sm shadow-lg border-2 transition-all duration-300 hover:shadow-xl ".concat((b||y.image[0])===e?"border-[#feecaf] shadow-xl scale-105":"border-gray-200/50 hover:border-[#feecaf]/50"),children:(0,r.jsx)(h.default,{src:e,alt:y.name,className:"w-full h-20 object-cover",width:200,height:80})},s):null):(0,r.jsx)("div",{onClick:()=>j("/placeholder-product.jpeg"),className:"cursor-pointer rounded-xl overflow-hidden bg-white/80 backdrop-blur-sm shadow-lg border-2 border-gray-200/50 hover:border-[#feecaf]/50 transition-all duration-300 hover:shadow-xl col-span-4",children:(0,r.jsx)(h.default,{src:"/placeholder-product.jpeg",alt:y.name,className:"w-full h-20 object-cover",width:200,height:80})})})]}),(0,r.jsxs)("div",{className:"space-y-8",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-4xl lg:text-5xl font-bold text-gray-900 mb-4 leading-tight",children:y.name}),(0,r.jsxs)("div",{className:"flex items-center gap-4 mb-6",children:[(0,r.jsx)(i.A,{rating:y.averageRating||0,totalRatings:y.totalRatings||0,size:"lg",showCount:!0}),(0,r.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-500",children:[(0,r.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"})}),(0,r.jsx)("span",{className:"capitalize",children:p(y.category)})]})]}),(0,r.jsx)("p",{className:"text-gray-600 text-lg leading-relaxed",children:y.description})]}),(0,r.jsx)("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl shadow-xl border border-gray-200/50 p-6",children:(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("span",{className:"text-gray-600 font-medium",children:"Precio Minorista:"}),(0,r.jsxs)("span",{className:"text-3xl font-bold text-gray-900",children:["$",y.price]})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("span",{className:"text-gray-600 font-medium",children:"Precio Mayorista:"}),(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsxs)("span",{className:"text-3xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-green-600 to-emerald-600",children:["$",y.offerPrice]}),(0,r.jsxs)("span",{className:"bg-gradient-to-r from-green-100 to-emerald-100 text-green-800 px-3 py-1 rounded-full text-sm font-semibold",children:["Desde ",y.minQuantity&&y.minQuantity>0?y.minQuantity:1," unidades"]})]})]}),(0,r.jsx)("div",{className:"bg-gradient-to-r from-[#feecaf]/20 to-yellow-300/20 border border-[#feecaf]/30 rounded-xl p-4",children:(0,r.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-700",children:[(0,r.jsx)("svg",{className:"w-5 h-5 text-[#feecaf]",fill:"currentColor",viewBox:"0 0 20 20",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})}),(0,r.jsxs)("span",{className:"font-medium",children:["Ahorra $",(y.price-y.offerPrice).toFixed(2)," por unidad comprando ",y.minQuantity&&y.minQuantity>0?y.minQuantity:1," o m\xe1s"]})]})})]})}),(0,r.jsxs)("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl shadow-xl border border-gray-200/50 p-6",children:[(0,r.jsx)("h3",{className:"text-xl font-bold text-gray-900 mb-6",children:"Especificaciones"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{className:"flex justify-between py-3 border-b border-gray-200/50",children:[(0,r.jsx)("span",{className:"text-gray-600 font-medium",children:"Marca"}),(0,r.jsx)("span",{className:"text-gray-900 font-semibold",children:"Gen\xe9rica"})]}),(0,r.jsxs)("div",{className:"flex justify-between py-3 border-b border-gray-200/50",children:[(0,r.jsx)("span",{className:"text-gray-600 font-medium",children:"Color"}),(0,r.jsx)("span",{className:"text-gray-900 font-semibold",children:"M\xfaltiple"})]}),(0,r.jsxs)("div",{className:"flex justify-between py-3 border-b border-gray-200/50",children:[(0,r.jsx)("span",{className:"text-gray-600 font-medium",children:"Categor\xeda"}),(0,r.jsx)("span",{className:"text-gray-900 font-semibold capitalize",children:p(y.category)})]}),(0,r.jsxs)("div",{className:"flex justify-between py-3 border-b border-gray-200/50",children:[(0,r.jsx)("span",{className:"text-gray-600 font-medium",children:"Cantidad M\xednima"}),(0,r.jsxs)("span",{className:"text-gray-900 font-semibold",children:[y.minQuantity&&y.minQuantity>0?y.minQuantity:1," unidades"]})]})]})]}),(0,r.jsx)("div",{className:"space-y-4",children:(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,r.jsx)("button",{onClick:()=>n(y._id),className:"flex-1 py-4 px-6 bg-white border-2 border-gray-300 text-gray-800 rounded-xl font-semibold hover:border-[#feecaf] hover:bg-[#feecaf]/10 transition-all duration-300 shadow-lg hover:shadow-xl transform hover:scale-105",children:(0,r.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[(0,r.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 3h2l.4 2M7 13h10l4-8H5.4m0 0L7 13m0 0l-2.5 5M7 13l2.5 5m6-5v6a2 2 0 01-2 2H9a2 2 0 01-2-2v-6m8 0V9a2 2 0 00-2-2H9a2 2 0 00-2 2v4.01"})}),"Agregar al Carrito"]})}),(0,r.jsx)("button",{onClick:()=>{n(y._id),a.push("/cart")},className:"flex-1 py-4 px-6 bg-gradient-to-r from-[#feecaf] to-yellow-300 text-gray-800 rounded-xl font-semibold hover:from-yellow-300 hover:to-[#feecaf] transition-all duration-300 shadow-lg hover:shadow-xl transform hover:scale-105",children:(0,r.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[(0,r.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})}),"Comprar Ahora"]})})]})})]})]})]}),(0,r.jsx)("div",{className:"mt-20",children:(0,r.jsxs)("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl shadow-xl border border-gray-200/50 p-8",children:[(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between mb-8",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Rese\xf1as y Calificaciones"}),(0,r.jsx)("p",{className:"text-gray-600",children:"Comparte tu experiencia con otros clientes"})]}),(0,r.jsx)("button",{onClick:()=>C(!k),className:"mt-4 sm:mt-0 px-6 py-3 bg-gradient-to-r from-[#feecaf] to-yellow-300 text-gray-800 rounded-xl font-semibold hover:from-yellow-300 hover:to-[#feecaf] transition-all duration-300 shadow-lg hover:shadow-xl transform hover:scale-105",children:k?"Cancelar":"Escribir Rese\xf1a"})]}),k&&(0,r.jsxs)("div",{className:"mb-8 p-6 bg-gradient-to-br from-gray-50 to-gray-100 rounded-2xl border border-gray-200/50",children:[(0,r.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Califica este producto"}),(0,r.jsx)(c,{productId:y._id,onRatingSubmit:e=>{M(y._id),C(!1)}})]}),(0,r.jsx)("div",{className:"space-y-6",children:N.length>0?N.map((e,s)=>(0,r.jsxs)("div",{className:"bg-white border border-gray-200/50 rounded-2xl p-6 shadow-lg",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("div",{className:"w-10 h-10 bg-gradient-to-br from-[#feecaf] to-yellow-300 rounded-full flex items-center justify-center",children:(0,r.jsx)("span",{className:"text-gray-800 font-semibold text-sm",children:e.userName.charAt(0).toUpperCase()})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"font-semibold text-gray-900",children:e.userName}),(0,r.jsx)("div",{className:"flex items-center gap-2 mt-1",children:(0,r.jsx)(i.A,{rating:e.rating,size:"sm",showCount:!1})})]})]}),(0,r.jsx)("span",{className:"text-sm text-gray-500",children:new Date(e.createdAt).toLocaleDateString()})]}),e.review&&(0,r.jsx)("p",{className:"text-gray-700 leading-relaxed",children:e.review})]},s)):(0,r.jsxs)("div",{className:"text-center py-12",children:[(0,r.jsx)("div",{className:"w-20 h-20 bg-gradient-to-br from-gray-100 to-gray-200 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,r.jsx)("svg",{className:"w-10 h-10 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"})})}),(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No hay rese\xf1as a\xfan"}),(0,r.jsx)("p",{className:"text-gray-600",children:"\xa1S\xe9 el primero en calificar este producto!"})]})})]})}),(0,r.jsxs)("div",{className:"mt-20",children:[(0,r.jsxs)("div",{className:"text-center mb-12",children:[(0,r.jsxs)("div",{className:"inline-flex items-center gap-2 bg-gradient-to-r from-[#feecaf] to-yellow-300 text-gray-800 px-4 py-2 rounded-full text-sm font-semibold mb-4",children:[(0,r.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})}),"Productos relacionados"]}),(0,r.jsxs)("h2",{className:"text-4xl font-bold text-gray-900 mb-4",children:["Tambi\xe9n te puede ",(0,r.jsx)("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-[#feecaf] to-yellow-300",children:"interesar"})]}),(0,r.jsx)("p",{className:"text-gray-600 text-lg max-w-2xl mx-auto",children:"Descubre otros productos que podr\xedan complementar tu compra"}),(0,r.jsx)("div",{className:"w-24 h-1 bg-gradient-to-r from-[#feecaf] to-yellow-300 rounded-full mt-6 mx-auto"})]}),(0,r.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-6 justify-items-center",children:s.slice(0,5).map((e,s)=>(0,r.jsx)(l.A,{product:e},s))}),(0,r.jsx)("div",{className:"text-center mt-12",children:(0,r.jsx)("button",{onClick:()=>a.push("/all-products"),className:"px-8 py-4 bg-gradient-to-r from-[#feecaf] to-yellow-300 text-gray-800 rounded-xl font-semibold hover:from-yellow-300 hover:to-[#feecaf] transition-all duration-300 shadow-lg hover:shadow-xl transform hover:scale-105",children:"Ver todos los productos"})})]})]}),(0,r.jsx)("div",{className:"pb-16"}),(0,r.jsx)(m.A,{}),(0,r.jsx)(x.A,{})]}):(0,r.jsx)(f.A,{})}},1598:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});var r=a(5155);a(2115);let t=()=>(0,r.jsx)("div",{className:"flex justify-center items-center h-[70vh]",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-20 w-20 border-4 border-t-[#feecaf] border-gray-200"})})}},e=>{var s=s=>e(e.s=s);e.O(0,[5479,6711,5037,2651,3060,5565,8007,358,6962,3996,846,5630,8441,1517,7358],()=>s(380)),_N_E=e.O()}]);