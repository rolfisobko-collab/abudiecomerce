(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2661],{6487:(e,s,t)=>{Promise.resolve().then(t.bind(t,1875))},1875:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>x});var l={};t.r(l);var a=t(5155),r=t(2115),i=t(3996),c=t(846),n=t(3805),d=t(1536);let o=()=>{let{products:e,userData:s}=(0,n.U)(),[t,i]=(0,r.useState)({totalProducts:0,totalRevenue:0,averageRating:0,topCategories:[],topProducts:[],priceAnalysis:{},stockAnalysis:{},recentActivity:[]});(0,r.useEffect)(()=>{if(0===e.length)return;let s=e.length,t=e.reduce((e,s)=>{let t=2*(s.totalRatings||0);return e+s.offerPrice*t},0),l=e.reduce((e,s)=>e+(s.averageRating||0),0)/s,a={};e.forEach(e=>{a[e.category]=(a[e.category]||0)+1});let r=Object.entries(a).sort((e,s)=>{let[,t]=e,[,l]=s;return l-t}).slice(0,5).map(e=>{let[s,t]=e;return{category:s,count:t}});i({totalProducts:s,totalRevenue:t,averageRating:l,topCategories:r,topProducts:[...e].sort((e,s)=>(s.averageRating||0)-(e.averageRating||0)).slice(0,5),priceAnalysis:{"0-100":e.filter(e=>e.offerPrice<=100).length,"100-300":e.filter(e=>e.offerPrice>100&&e.offerPrice<=300).length,"300-500":e.filter(e=>e.offerPrice>300&&e.offerPrice<=500).length,"500+":e.filter(e=>e.offerPrice>500).length},stockAnalysis:{inStock:e.filter(e=>(e.stock||100)>0).length,lowStock:e.filter(e=>10>=(e.stock||100)).length,outOfStock:e.filter(e=>0===(e.stock||100)).length},recentActivity:[]})},[e]);let c=e=>{let{title:s,value:t,icon:r,trend:i,trendValue:c,color:n="blue"}=e;return(0,a.jsx)("div",{className:"bg-white rounded-xl shadow-lg p-6 border border-gray-200",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-600",children:s}),(0,a.jsx)("p",{className:"text-2xl font-bold text-gray-900 mt-1",children:t}),i&&(0,a.jsxs)("div",{className:"flex items-center mt-2 text-sm ".concat("up"===i?"text-green-600":"text-red-600"),children:["up"===i?(0,a.jsx)(l.FaTrendingUp,{className:"mr-1"}):(0,a.jsx)(l.FaTrendingDown,{className:"mr-1"}),c]})]}),(0,a.jsx)("div",{className:"p-3 rounded-full bg-".concat(n,"-100"),children:(0,a.jsx)(r,{className:"w-6 h-6 text-".concat(n,"-600")})})]})})},o=e=>{let{title:s,children:t}=e;return(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-6 border border-gray-200",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:s}),t]})};return(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 py-8",children:(0,a.jsxs)("div",{className:"max-w-7xl mx-auto px-6",children:[(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Dashboard Ejecutivo"}),(0,a.jsx)("p",{className:"text-gray-600 mt-2",children:"An\xe1lisis completo del rendimiento de la tienda"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[(0,a.jsx)(c,{title:"Total Productos",value:t.totalProducts.toLocaleString(),icon:d.G5z,color:"blue"}),(0,a.jsx)(c,{title:"Ingresos Estimados",value:"$".concat(t.totalRevenue.toLocaleString()),icon:d.Tsk,color:"green"}),(0,a.jsx)(c,{title:"Rating Promedio",value:t.averageRating.toFixed(1),icon:d.gt3,color:"yellow"}),(0,a.jsx)(c,{title:"Productos en Stock",value:t.stockAnalysis.inStock,icon:d.AsH,color:"purple"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[(0,a.jsx)(o,{title:"Top Categor\xedas",children:(0,a.jsx)("div",{className:"space-y-3",children:t.topCategories.map((e,s)=>(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("span",{className:"text-sm font-medium text-gray-700",children:["Categor\xeda ",s+1]}),(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"w-32 bg-gray-200 rounded-full h-2 mr-3",children:(0,a.jsx)("div",{className:"bg-blue-600 h-2 rounded-full",style:{width:"".concat(e.count/t.totalProducts*100,"%")}})}),(0,a.jsx)("span",{className:"text-sm text-gray-600 w-8",children:e.count})]})]},s))})}),(0,a.jsx)(o,{title:"Distribuci\xf3n de Precios",children:(0,a.jsx)("div",{className:"space-y-4",children:Object.entries(t.priceAnalysis).map(e=>{let[s,l]=e;return(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("span",{className:"text-sm font-medium text-gray-700",children:["$",s]}),(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"w-32 bg-gray-200 rounded-full h-2 mr-3",children:(0,a.jsx)("div",{className:"bg-green-600 h-2 rounded-full",style:{width:"".concat(l/t.totalProducts*100,"%")}})}),(0,a.jsx)("span",{className:"text-sm text-gray-600 w-8",children:l})]})]},s)})})}),(0,a.jsx)(o,{title:"Productos Mejor Calificados",children:(0,a.jsx)("div",{className:"space-y-3",children:t.topProducts.map((e,s)=>{var t;return(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-900 truncate",children:e.name}),(0,a.jsxs)("p",{className:"text-xs text-gray-500",children:["$",e.offerPrice," • ",e.totalRatings||0," rese\xf1as"]})]}),(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(d.gt3,{className:"w-4 h-4 text-yellow-400 mr-1"}),(0,a.jsx)("span",{className:"text-sm font-medium text-gray-900",children:(null===(t=e.averageRating)||void 0===t?void 0:t.toFixed(1))||"0.0"})]})]},e._id)})})}),(0,a.jsx)(o,{title:"Estado del Inventario",children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 bg-green-50 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"w-3 h-3 bg-green-500 rounded-full mr-3"}),(0,a.jsx)("span",{className:"text-sm font-medium text-gray-900",children:"En Stock"})]}),(0,a.jsx)("span",{className:"text-lg font-bold text-green-600",children:t.stockAnalysis.inStock})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 bg-yellow-50 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"w-3 h-3 bg-yellow-500 rounded-full mr-3"}),(0,a.jsx)("span",{className:"text-sm font-medium text-gray-900",children:"Stock Bajo"})]}),(0,a.jsx)("span",{className:"text-lg font-bold text-yellow-600",children:t.stockAnalysis.lowStock})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 bg-red-50 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"w-3 h-3 bg-red-500 rounded-full mr-3"}),(0,a.jsx)("span",{className:"text-sm font-medium text-gray-900",children:"Sin Stock"})]}),(0,a.jsx)("span",{className:"text-lg font-bold text-red-600",children:t.stockAnalysis.outOfStock})]})]})})]}),(0,a.jsx)("div",{className:"mt-8",children:(0,a.jsx)(o,{title:"Insights y Recomendaciones",children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"p-4 bg-blue-50 rounded-lg",children:[(0,a.jsx)("h4",{className:"font-medium text-blue-900 mb-2",children:"\uD83D\uDCC8 Oportunidad de Crecimiento"}),(0,a.jsxs)("p",{className:"text-sm text-blue-800",children:["Tienes ",t.stockAnalysis.lowStock," productos con stock bajo. Considera reponer inventario para maximizar ventas."]})]}),(0,a.jsxs)("div",{className:"p-4 bg-green-50 rounded-lg",children:[(0,a.jsx)("h4",{className:"font-medium text-green-900 mb-2",children:"⭐ Calidad del Cat\xe1logo"}),(0,a.jsxs)("p",{className:"text-sm text-green-800",children:["Tu rating promedio de ",t.averageRating.toFixed(1)," estrellas indica una buena calidad de productos."]})]}),(0,a.jsxs)("div",{className:"p-4 bg-purple-50 rounded-lg",children:[(0,a.jsx)("h4",{className:"font-medium text-purple-900 mb-2",children:"\uD83D\uDCB0 Optimizaci\xf3n de Precios"}),(0,a.jsx)("p",{className:"text-sm text-purple-800",children:"Considera ajustar precios en productos con pocas rese\xf1as para mejorar la competitividad."})]})]})})})]})})};var m=t(6046);let x=()=>{let{user:e,isSeller:s}=(0,n.U)(),t=(0,m.useRouter)();return((0,r.useEffect)(()=>{e&&(s||"admin"===e.role||"ceo"===e.role)||t.push("/unauthorized")},[e,s,t]),e&&(s||"admin"===e.role||"ceo"===e.role))?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(i.A,{}),(0,a.jsx)(o,{}),(0,a.jsx)(c.A,{})]}):(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Acceso Denegado"}),(0,a.jsx)("p",{className:"text-gray-600",children:"No tienes permisos para acceder a esta p\xe1gina."})]})})}}},e=>{var s=s=>e(e.s=s);e.O(0,[5479,6711,5037,2651,3060,5565,8007,6962,3996,846,8441,1517,7358],()=>s(6487)),_N_E=e.O()}]);