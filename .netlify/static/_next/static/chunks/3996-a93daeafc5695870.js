"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3996],{3996:(e,t,r)=>{r.d(t,{A:()=>u});var a=r(5155),o=r(2115),s=r(6962),l=r(8173),n=r.n(l),i=r(3805),c=r(5565);r(2615);var d=r(1536);let u=()=>{let{isSeller:e,router:t,user:r,signOut:l,products:u,cartItems:h}=(0,i.U)(),[m,g]=(0,o.useState)(!1),[f,x]=(0,o.useState)(""),[p,b]=(0,o.useState)([]),[w,y]=(0,o.useState)(!1),[j,v]=(0,o.useState)(!1),N=(0,o.useRef)(null),C=(0,o.useRef)(null),k=()=>Object.values(h).reduce((e,t)=>e+t,0),E=e=>{if(!e.trim()||!u.length){b([]),y(!1);return}let t=e.toLowerCase().trim(),r=u.filter(e=>{let r=e.name.toLowerCase().includes(t),a=e.description.toLowerCase().includes(t),o=e.category.toLowerCase().includes(t),s=e.price.toString().includes(t)||e.offerPrice.toString().includes(t),l=e.minQuantity.toString().includes(t),n=t.split(" ").filter(e=>e.length>0),i=n.some(t=>e.name.toLowerCase().includes(t)||e.description.toLowerCase().includes(t)||e.category.toLowerCase().includes(t)||e.price.toString().includes(t)||e.offerPrice.toString().includes(t)),c=n.some(t=>Object.entries({telefono:["phone","celular","m\xf3vil","smartphone"],laptop:["notebook","computadora","pc"],auricular:["headphone","aud\xedfono","cascos"],cargador:["charger","cable"],fund:["funda","case","estuche"],barato:["econ\xf3mico","low","cheap"],caro:["costoso","expensive","premium"]}).some(r=>{let[a,o]=r;return t===a&&e.name.toLowerCase().includes(t)||o.some(r=>t===r&&(e.name.toLowerCase().includes(r)||e.description.toLowerCase().includes(r)||e.category.toLowerCase().includes(r)))}));return r||a||o||s||l||i||c}).sort((e,r)=>{let a=e.name.toLowerCase(),o=r.name.toLowerCase();return a===t?-1:o===t?1:a.startsWith(t)&&!o.startsWith(t)?-1:o.startsWith(t)&&!a.startsWith(t)?1:a.localeCompare(o)});b(r.slice(0,8)),y(r.length>0)};(0,o.useEffect)(()=>{let e=setTimeout(()=>{E(f)},300);return()=>clearTimeout(e)},[f,u]),(0,o.useEffect)(()=>{let e=e=>{N.current&&!N.current.contains(e.target)&&C.current&&!C.current.contains(e.target)&&(y(!1),v(!1))};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]);let S=e=>{e.preventDefault(),f.trim()&&(t.push("/all-products?search=".concat(encodeURIComponent(f.trim()))),y(!1),v(!1))},D=e=>{t.push("/product/".concat(e)),y(!1),v(!1),x("")};return(0,a.jsxs)("nav",{className:"sticky top-0 z-50 backdrop-blur-md bg-black/95 border-b border-gray-800/50 shadow-lg",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between px-6 md:px-16 lg:px-32 py-4",children:[(0,a.jsx)("div",{className:"flex items-center",children:(0,a.jsx)(c.default,{className:"cursor-pointer w-28 md:w-32 transition-transform duration-300 hover:scale-105",onClick:()=>t.push("/"),src:"/abudilogo2.png",alt:"logo",width:128,height:128})}),(0,a.jsxs)("div",{className:"hidden lg:flex items-center gap-8",children:[(0,a.jsxs)(n(),{href:"/",className:"relative group text-white hover:text-[#feecaf] transition-all duration-300 font-medium",children:[(0,a.jsx)("span",{children:"Inicio"}),(0,a.jsx)("div",{className:"absolute -bottom-1 left-0 w-0 h-0.5 bg-gradient-to-r from-[#feecaf] to-yellow-300 transition-all duration-300 group-hover:w-full"})]}),(0,a.jsxs)(n(),{href:"/all-products",className:"relative group text-white hover:text-[#feecaf] transition-all duration-300 font-medium",children:[(0,a.jsx)("span",{children:"Tienda"}),(0,a.jsx)("div",{className:"absolute -bottom-1 left-0 w-0 h-0.5 bg-gradient-to-r from-[#feecaf] to-yellow-300 transition-all duration-300 group-hover:w-full"})]}),(0,a.jsxs)(n(),{href:"/about-us",className:"relative group text-white hover:text-[#feecaf] transition-all duration-300 font-medium",children:[(0,a.jsx)("span",{children:"Acerca de Nosotros"}),(0,a.jsx)("div",{className:"absolute -bottom-1 left-0 w-0 h-0.5 bg-gradient-to-r from-[#feecaf] to-yellow-300 transition-all duration-300 group-hover:w-full"})]}),(0,a.jsxs)(n(),{href:"/contact",className:"relative group text-white hover:text-[#feecaf] transition-all duration-300 font-medium",children:[(0,a.jsx)("span",{children:"Contacto"}),(0,a.jsx)("div",{className:"absolute -bottom-1 left-0 w-0 h-0.5 bg-gradient-to-r from-[#feecaf] to-yellow-300 transition-all duration-300 group-hover:w-full"})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-6",children:[(0,a.jsxs)("div",{className:"relative",ref:N,children:[(0,a.jsx)("form",{onSubmit:S,className:"relative",children:(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("input",{type:"text",placeholder:"Buscar productos...",value:f,onChange:e=>x(e.target.value),onFocus:()=>v(!0),className:"w-64 px-4 py-2.5 pl-12 pr-12 text-gray-900 bg-white/90 backdrop-blur-sm rounded-full focus:outline-none focus:ring-2 focus:ring-[#feecaf] focus:bg-white transition-all duration-300 shadow-lg border border-gray-200/50"}),(0,a.jsx)(d.KSO,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-500 w-4 h-4"}),f&&(0,a.jsx)("button",{type:"button",onClick:()=>{x(""),y(!1)},className:"absolute right-4 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600 transition-colors",children:(0,a.jsx)(d.QCr,{className:"w-4 h-4"})})]})}),w&&p.length>0&&(0,a.jsx)("div",{ref:C,className:"absolute top-full left-0 right-0 mt-3 bg-white/95 backdrop-blur-md rounded-2xl shadow-2xl border border-gray-200/50 z-50 max-h-96 overflow-y-auto",children:(0,a.jsxs)("div",{className:"p-4",children:[(0,a.jsxs)("div",{className:"text-xs text-gray-500 mb-3 px-2 font-medium",children:[p.length," resultado",1!==p.length?"s":""," encontrado",1!==p.length?"s":""]}),p.map(e=>(0,a.jsxs)("button",{onClick:()=>D(e._id),className:"w-full flex items-center gap-4 p-3 hover:bg-gradient-to-r hover:from-[#feecaf]/10 hover:to-yellow-300/10 rounded-xl transition-all duration-300 text-left group",children:[(0,a.jsx)("div",{className:"w-14 h-14 bg-gradient-to-br from-gray-100 to-gray-200 rounded-xl flex-shrink-0 overflow-hidden shadow-sm group-hover:shadow-md transition-shadow",children:e.image&&e.image.length>0&&e.image[0]?(0,a.jsx)(c.default,{src:e.image[0],alt:e.name,width:56,height:56,className:"w-full h-full object-cover"}):(0,a.jsx)(c.default,{src:"/placeholder-product.jpeg",alt:e.name,width:56,height:56,className:"w-full h-full object-cover"})}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("h4",{className:"font-semibold text-gray-900 truncate group-hover:text-[#feecaf] transition-colors",children:e.name}),(0,a.jsx)("p",{className:"text-sm text-gray-500 truncate capitalize",children:e.category}),(0,a.jsxs)("p",{className:"text-sm font-bold text-transparent bg-clip-text bg-gradient-to-r from-[#feecaf] to-yellow-300",children:["$",e.price]})]})]},e._id)),p.length>=8&&(0,a.jsx)("button",{onClick:S,className:"w-full p-4 text-center text-transparent bg-clip-text bg-gradient-to-r from-[#feecaf] to-yellow-300 hover:from-yellow-300 hover:to-[#feecaf] rounded-xl transition-all duration-300 border-t border-gray-200/50 font-semibold",children:"Ver todos los resultados"})]})}),w&&0===p.length&&f.trim()&&(0,a.jsx)("div",{ref:C,className:"absolute top-full left-0 right-0 mt-3 bg-white/95 backdrop-blur-md rounded-2xl shadow-2xl border border-gray-200/50 z-50 p-6",children:(0,a.jsxs)("div",{className:"text-center text-gray-500",children:[(0,a.jsx)("div",{className:"w-16 h-16 bg-gradient-to-br from-gray-100 to-gray-200 rounded-full flex items-center justify-center mx-auto mb-3",children:(0,a.jsx)(d.KSO,{className:"w-6 h-6 text-gray-400"})}),(0,a.jsx)("p",{className:"font-medium",children:"No se encontraron productos"}),(0,a.jsx)("p",{className:"text-sm mt-1",children:"Intenta con otros t\xe9rminos de b\xfasqueda"})]})})]}),(0,a.jsxs)("button",{onClick:()=>t.push("/cart"),className:"relative flex items-center gap-2 px-4 py-2 bg-white/10 backdrop-blur-sm rounded-full hover:bg-white/20 transition-all duration-300 text-white border border-white/20",children:[(0,a.jsx)(d.AsH,{className:"w-5 h-5"}),(0,a.jsx)("span",{className:"hidden lg:block font-medium",children:"Carrito"}),k()>0&&(0,a.jsx)("div",{className:"absolute -top-2 -right-2 w-6 h-6 bg-red-500 text-white text-xs font-bold rounded-full flex items-center justify-center",children:k()})]}),r?(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsxs)("button",{onClick:()=>g(!m),className:"flex items-center gap-3 px-4 py-2 bg-white/10 backdrop-blur-sm rounded-full hover:bg-white/20 transition-all duration-300 text-white border border-white/20",children:[(0,a.jsx)("div",{className:"w-8 h-8 bg-gradient-to-br from-[#feecaf] to-yellow-300 rounded-full flex items-center justify-center",children:(0,a.jsx)(c.default,{src:s.mY.user_icon,alt:"user icon",width:16,height:16})}),(0,a.jsx)("span",{className:"hidden lg:block font-medium",children:r.name})]}),m&&(0,a.jsxs)("div",{className:"absolute right-0 mt-3 w-56 bg-white/95 backdrop-blur-md rounded-2xl shadow-2xl py-2 z-50 border border-gray-200/50",children:[(0,a.jsxs)("button",{onClick:()=>{t.push("/my-orders"),g(!1)},className:"flex items-center gap-3 w-full px-4 py-3 text-sm text-gray-700 hover:bg-gradient-to-r hover:from-[#feecaf]/10 hover:to-yellow-300/10 transition-all duration-300",children:[(0,a.jsx)(s.UH,{}),(0,a.jsx)("span",{children:"Mis Pedidos"})]}),(0,a.jsx)("hr",{className:"my-2 border-gray-200/50"}),(0,a.jsx)("button",{onClick:()=>{l(),g(!1)},className:"w-full px-4 py-3 text-sm text-gray-700 hover:bg-gradient-to-r hover:from-red-50 hover:to-red-100 transition-all duration-300 text-left",children:"Cerrar Sesi\xf3n"})]})]}):(0,a.jsxs)(n(),{href:"/auth/signin",className:"flex items-center gap-3 px-4 py-2 bg-white/10 backdrop-blur-sm rounded-full hover:bg-white/20 transition-all duration-300 text-white border border-white/20",children:[(0,a.jsx)("div",{className:"w-8 h-8 bg-gradient-to-br from-[#feecaf] to-yellow-300 rounded-full flex items-center justify-center",children:(0,a.jsx)(c.default,{src:s.mY.user_icon,alt:"user icon",width:16,height:16})}),(0,a.jsx)("span",{className:"hidden lg:block font-medium",children:"Cuenta"})]})]})]}),(0,a.jsxs)("div",{className:"lg:hidden flex items-center gap-3",children:[(0,a.jsxs)("div",{className:"relative",ref:N,children:[(0,a.jsxs)("form",{onSubmit:S,className:"relative",children:[(0,a.jsx)("input",{type:"text",placeholder:"Buscar...",value:f,onChange:e=>x(e.target.value),onFocus:()=>v(!0),className:"w-32 px-3 py-2 pl-8 pr-8 text-gray-900 bg-white/90 backdrop-blur-sm rounded-full focus:outline-none focus:ring-2 focus:ring-[#feecaf] focus:bg-white transition-all duration-300 text-sm shadow-lg border border-gray-200/50"}),(0,a.jsx)(d.KSO,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-500 w-3 h-3"}),f&&(0,a.jsx)("button",{type:"button",onClick:()=>{x(""),y(!1)},className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600 transition-colors",children:(0,a.jsx)(d.QCr,{className:"w-3 h-3"})})]}),w&&p.length>0&&(0,a.jsx)("div",{ref:C,className:"absolute top-full left-0 right-0 mt-3 bg-white/95 backdrop-blur-md rounded-2xl shadow-2xl border border-gray-200/50 z-50 max-h-80 overflow-y-auto",children:(0,a.jsxs)("div",{className:"p-3",children:[(0,a.jsxs)("div",{className:"text-xs text-gray-500 mb-2 px-2 font-medium",children:[p.length," resultado",1!==p.length?"s":""]}),p.map(e=>(0,a.jsxs)("button",{onClick:()=>D(e._id),className:"w-full flex items-center gap-3 p-2 hover:bg-gradient-to-r hover:from-[#feecaf]/10 hover:to-yellow-300/10 rounded-xl transition-all duration-300 text-left group",children:[(0,a.jsx)("div",{className:"w-10 h-10 bg-gradient-to-br from-gray-100 to-gray-200 rounded-lg flex-shrink-0 overflow-hidden shadow-sm",children:e.image&&e.image.length>0&&e.image[0]?(0,a.jsx)(c.default,{src:e.image[0],alt:e.name,width:40,height:40,className:"w-full h-full object-cover"}):(0,a.jsx)(c.default,{src:"/placeholder-product.jpeg",alt:e.name,width:40,height:40,className:"w-full h-full object-cover"})}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("h4",{className:"font-semibold text-gray-900 truncate text-sm group-hover:text-[#feecaf] transition-colors",children:e.name}),(0,a.jsx)("p",{className:"text-xs text-gray-500 truncate capitalize",children:e.category}),(0,a.jsxs)("p",{className:"text-xs font-bold text-transparent bg-clip-text bg-gradient-to-r from-[#feecaf] to-yellow-300",children:["$",e.price]})]})]},e._id)),p.length>=8&&(0,a.jsx)("button",{onClick:S,className:"w-full p-3 text-center text-transparent bg-clip-text bg-gradient-to-r from-[#feecaf] to-yellow-300 hover:from-yellow-300 hover:to-[#feecaf] rounded-xl transition-all duration-300 border-t border-gray-200/50 text-sm font-semibold",children:"Ver todos"})]})}),w&&0===p.length&&f.trim()&&(0,a.jsx)("div",{ref:C,className:"absolute top-full left-0 right-0 mt-3 bg-white/95 backdrop-blur-md rounded-2xl shadow-2xl border border-gray-200/50 z-50 p-4",children:(0,a.jsxs)("div",{className:"text-center text-gray-500",children:[(0,a.jsx)("div",{className:"w-12 h-12 bg-gradient-to-br from-gray-100 to-gray-200 rounded-full flex items-center justify-center mx-auto mb-2",children:(0,a.jsx)(d.KSO,{className:"w-4 h-4 text-gray-400"})}),(0,a.jsx)("p",{className:"text-sm font-medium",children:"No se encontraron productos"})]})})]}),(0,a.jsxs)("button",{onClick:()=>t.push("/cart"),className:"relative flex items-center gap-2 px-3 py-2 bg-white/10 backdrop-blur-sm rounded-full hover:bg-white/20 transition-all duration-300 text-white border border-white/20",children:[(0,a.jsx)(d.AsH,{className:"w-4 h-4"}),k()>0&&(0,a.jsx)("div",{className:"absolute -top-1 -right-1 w-5 h-5 bg-red-500 text-white text-xs font-bold rounded-full flex items-center justify-center",children:k()})]}),r?(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("button",{onClick:()=>g(!m),className:"flex items-center gap-2 px-3 py-2 bg-white/10 backdrop-blur-sm rounded-full hover:bg-white/20 transition-all duration-300 text-white border border-white/20",children:(0,a.jsx)("div",{className:"w-6 h-6 bg-gradient-to-br from-[#feecaf] to-yellow-300 rounded-full flex items-center justify-center",children:(0,a.jsx)(c.default,{src:s.mY.user_icon,alt:"user icon",width:12,height:12})})}),m&&(0,a.jsxs)("div",{className:"absolute right-0 mt-3 w-48 bg-white/95 backdrop-blur-md rounded-2xl shadow-2xl py-2 z-50 border border-gray-200/50",children:[(0,a.jsxs)("button",{onClick:()=>{t.push("/"),g(!1)},className:"flex items-center gap-3 w-full px-4 py-3 text-sm text-gray-700 hover:bg-gradient-to-r hover:from-[#feecaf]/10 hover:to-yellow-300/10 transition-all duration-300",children:[(0,a.jsx)(s.fA,{}),(0,a.jsx)("span",{children:"Inicio"})]}),(0,a.jsxs)("button",{onClick:()=>{t.push("/all-products"),g(!1)},className:"flex items-center gap-3 w-full px-4 py-3 text-sm text-gray-700 hover:bg-gradient-to-r hover:from-[#feecaf]/10 hover:to-yellow-300/10 transition-all duration-300",children:[(0,a.jsx)(s.Fn,{}),(0,a.jsx)("span",{children:"Productos"})]}),(0,a.jsxs)("button",{onClick:()=>{t.push("/cart"),g(!1)},className:"flex items-center gap-3 w-full px-4 py-3 text-sm text-gray-700 hover:bg-gradient-to-r hover:from-[#feecaf]/10 hover:to-yellow-300/10 transition-all duration-300",children:[(0,a.jsx)(s.Kj,{}),(0,a.jsx)("span",{children:"Carrito"})]}),(0,a.jsxs)("button",{onClick:()=>{t.push("/my-orders"),g(!1)},className:"flex items-center gap-3 w-full px-4 py-3 text-sm text-gray-700 hover:bg-gradient-to-r hover:from-[#feecaf]/10 hover:to-yellow-300/10 transition-all duration-300",children:[(0,a.jsx)(s.UH,{}),(0,a.jsx)("span",{children:"Mis Pedidos"})]}),(0,a.jsx)("hr",{className:"my-2 border-gray-200/50"}),(0,a.jsx)("button",{onClick:()=>{l(),g(!1)},className:"w-full px-4 py-3 text-sm text-gray-700 hover:bg-gradient-to-r hover:from-red-50 hover:to-red-100 transition-all duration-300 text-left",children:"Cerrar Sesi\xf3n"})]})]}):(0,a.jsx)(n(),{href:"/auth/signin",className:"flex items-center gap-2 px-3 py-2 bg-white/10 backdrop-blur-sm rounded-full hover:bg-white/20 transition-all duration-300 text-white border border-white/20",children:(0,a.jsx)("div",{className:"w-6 h-6 bg-gradient-to-br from-[#feecaf] to-yellow-300 rounded-full flex items-center justify-center",children:(0,a.jsx)(c.default,{src:s.mY.user_icon,alt:"user icon",width:12,height:12})})})]})]})}},3805:(e,t,r)=>{r.d(t,{AppContextProvider:()=>u,U:()=>d});var a=r(5155),o=r(2615),s=r(2651),l=r(6046),n=r(2115),i=r(5037);let c=(0,n.createContext)(),d=()=>(0,n.useContext)(c),u=e=>{let t=(0,l.useRouter)(),{data:r,status:d}=(0,o.useSession)(),u=null==r?void 0:r.user,h=async()=>{try{if(!r)return console.log("No hay sesi\xf3n activa"),null;return"authenticated"}catch(e){return console.error("Error getting token:",e),null}},[m,g]=(0,n.useState)([]),[f,x]=(0,n.useState)([]),[p,b]=(0,n.useState)(!1),[w,y]=(0,n.useState)(!1),[j,v]=(0,n.useState)({}),[N,C]=(0,n.useState)(!0),k=async function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];try{if(C(!0),!e){let e=localStorage.getItem("quickcart_products"),t=localStorage.getItem("quickcart_products_timestamp");if(e&&t&&Date.now()-parseInt(t)<6e5){console.log("\uD83D\uDCE6 Cargando productos desde localStorage"),g(JSON.parse(e)),C(!1),E();return}}await E()}catch(e){console.error("Error loading products:",e),i.Ay.error("Error al cargar productos"),C(!1)}},E=async()=>{try{console.log("\uD83C\uDF10 Cargando productos desde Atlas (API)");let{data:e}=await s.A.get("/api/product/list",{timeout:1e4});if(e.success){let t=e.products.map(e=>({...e,minQuantity:e.minWholesaleQuantity&&e.minWholesaleQuantity>0?e.minWholesaleQuantity:1,image:e.image&&e.image.length>0&&e.image[0]&&""!==e.image[0]?e.image:["/placeholder-product.jpeg"]}));g(t),setTimeout(()=>{localStorage.setItem("quickcart_products",JSON.stringify(t)),localStorage.setItem("quickcart_products_timestamp",Date.now().toString()),console.log("\uD83D\uDCBE Productos guardados en localStorage (Atlas)")},0)}else i.Ay.error(e.message)}catch(e){console.error("Error fetching products from Atlas API:",e),i.Ay.error("Error al cargar productos desde Atlas")}finally{C(!1)}},S=async()=>{try{let{data:e}=await s.A.get("/api/categories");e.success&&x(e.categories)}catch(e){console.error("Error fetching categories:",e)}},D=async()=>{try{if(console.log("\uD83D\uDD0D [FRONTEND DEBUG] Iniciando fetchUserData..."),console.log("\uD83D\uDD0D [FRONTEND DEBUG] Usuario de NextAuth:",u?{id:u.id,email:u.email,role:u.role}:"No hay usuario"),!u){console.log("❌ [FRONTEND DEBUG] No hay usuario autenticado");return}console.log("\uD83D\uDD0D [FRONTEND DEBUG] Haciendo petici\xf3n a /api/user/data...");let{data:e}=await s.A.get("/api/user/data");console.log("\uD83D\uDD0D [FRONTEND DEBUG] Respuesta del servidor:",e),e.success?(console.log("✅ [FRONTEND DEBUG] Usuario encontrado exitosamente en la base de datos"),b(e.user),v(e.user.cartItems)):(console.log("❌ [FRONTEND DEBUG] Error del servidor:",e.message),i.Ay.error(e.message))}catch(e){console.log("❌ [FRONTEND DEBUG] Error en fetchUserData:",e.message),console.log("\uD83D\uDD0D [FRONTEND DEBUG] Error completo:",e),i.Ay.error(e.message)}},A=async e=>{if(!u)return(0,i.Ay)("Please login",{icon:"⚠️"});let t=structuredClone(j);if(t[e]?t[e]+=1:t[e]=1,v(t),u)try{await s.A.post("/api/cart/update",{cartData:t}),i.Ay.success("Item added to cart")}catch(e){i.Ay.error(e.message)}},U=async(e,t)=>{let r=structuredClone(j);if(0===t?delete r[e]:r[e]=t,v(r),u)try{await s.A.post("/api/cart/update",{cartData:r}),i.Ay.success("Cart Updated")}catch(e){i.Ay.error(e.message)}};(0,n.useEffect)(()=>{k(),S()},[]),(0,n.useEffect)(()=>{console.log("\uD83D\uDD0D [FRONTEND DEBUG] useEffect ejecutado - usuario cambi\xf3:",u?{id:u.id,email:u.email,role:u.role}:"No hay usuario"),u?(console.log("\uD83D\uDD0D [FRONTEND DEBUG] Usuario detectado, llamando fetchUserData..."),D()):(console.log("\uD83D\uDD0D [FRONTEND DEBUG] No hay usuario, limpiando datos..."),b(!1),y(!1),v({}))},[u]);let O={user:u,signOut:o.signOut,getToken:h,currency:"$",router:t,isSeller:w,setIsSeller:y,userData:p,fetchUserData:D,products:m,fetchProductData:k,categories:f,fetchCategories:S,getCategoryName:e=>{if(!e||!f.length)return"Sin categor\xeda";let t=f.find(t=>t._id===e);return t?t.name:"Sin categor\xeda"},updateProductRating:(e,t,r)=>{g(a=>a.map(a=>a._id===e?{...a,averageRating:t,totalRatings:r}:a))},isLoadingProducts:N,cartItems:j,setCartItems:v,addToCart:A,updateCartQuantity:U,getCartCount:()=>{let e=0;for(let t in j)j[t]>0&&(e+=j[t]);return e},getCartAmount:()=>{let e=0;for(let t in j){let r=m.find(e=>e._id===t);if(j[t]>0&&r){let a=r.minQuantity&&r.minQuantity>0?r.minQuantity:1;e+=(j[t]>=a?r.offerPrice:r.price)*j[t]}}return Math.floor(100*e)/100},generateCartShareUrl:()=>{let e=Object.entries(j).filter(e=>{let[t,r]=e;return r>0});if(0===e.length)return null;let t=e.map(e=>{let[t,r]=e;return"".concat(t,":").concat(r)}).join(",");return"".concat(window.location.origin,"/cart?products=").concat(encodeURIComponent(t))}};return(0,a.jsx)(c.Provider,{value:O,children:e.children})}}}]);